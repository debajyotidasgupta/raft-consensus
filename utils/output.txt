PASS TestElectionNormal map[0:true 1:true 2:true] ; entries: 60
┌─────────────────┬────────────────────────────────┬────────────────────────────────┬────────────────────────────────┐
│ TIME            │ 0                              │ 1                              │ 2                              │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.043470 │ listening at [::]:46083        │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.043649 │                                │ listening at [::]:37779        │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.043698 │                                │                                │ listening at [::]:44039        │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.045275 │                                │                                │ Election Timer started (288ms) │
│                 │                                │                                │ , term=0                       │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.045290 │                                │ Election Timer started (268ms) │                                │
│                 │                                │ , term=0                       │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.045325 │ Election Timer started (235ms) │                                │                                │
│                 │ , term=0                       │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.286596 │ Becomes Candidate (currentTerm │                                │                                │
│                 │ =1); log=[]                    │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.286816 │ Election Timer started (279ms) │                                │                                │
│                 │ , term=1                       │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.286843 │ Sending RequestVote to 1: {Ter │                                │                                │
│                 │ m:1 CandidateId:0 LastLogIndex │                                │                                │
│                 │ :0 LastLogTerm:0}              │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.286899 │ Sending RequestVote to 2: {Ter │                                │                                │
│                 │ m:1 CandidateId:0 LastLogIndex │                                │                                │
│                 │ :0 LastLogTerm:0}              │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.289733 │                                │                                │ RequestVote: {Term:1 Candidate │
│                 │                                │                                │ Id:0 LastLogIndex:0 LastLogTer │
│                 │                                │                                │ m:0} [currentTerm=0, votedFor= │
│                 │                                │                                │ -1, log index/term=(0, 0)]     │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.289871 │                                │                                │ Term out of date with term in  │
│                 │                                │                                │ RequestVote                    │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.289906 │                                │                                │ Becomes Follower with term=1;  │
│                 │                                │                                │ log=[]                         │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.290251 │                                │                                │ RequestVote reply: &{Term:1 Vo │
│                 │                                │                                │ teGranted:true}                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.290464 │                                │                                │ Election Timer started (292ms) │
│                 │                                │                                │ , term=1                       │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291215 │                                │ RequestVote: {Term:1 Candidate │                                │
│                 │                                │ Id:0 LastLogIndex:0 LastLogTer │                                │
│                 │                                │ m:0} [currentTerm=0, votedFor= │                                │
│                 │                                │ -1, log index/term=(0, 0)]     │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291342 │                                │ Term out of date with term in  │                                │
│                 │                                │ RequestVote                    │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291429 │ received RequestVoteReply {Ter │                                │                                │
│                 │ m:1 VoteGranted:true} from 2   │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291477 │ Wins election with 2 votes     │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291529 │ becomes Leader; term=1, nextIn │                                │                                │
│                 │ dex=map[1:1 2:1], matchIndex=m │                                │                                │
│                 │ ap[1:0 2:0]; log=[]            │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291622 │ sending AppendEntries to 2: ni │                                │                                │
│                 │ =1, args={Term:1 LeaderId:0 Pr │                                │                                │
│                 │ evLogIndex:0 PrevLogTerm:0 Ent │                                │                                │
│                 │ ries:[] LeaderCommit:0}        │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.291439 │                                │ Becomes Follower with term=1;  │                                │
│                 │                                │ log=[]                         │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.292017 │                                │ RequestVote reply: &{Term:1 Vo │                                │
│                 │                                │ teGranted:true}                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.292173 │                                │ Election Timer started (174ms) │                                │
│                 │                                │ , term=1                       │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.292216 │ sending AppendEntries to 1: ni │                                │                                │
│                 │ =1, args={Term:1 LeaderId:0 Pr │                                │                                │
│                 │ evLogIndex:0 PrevLogTerm:0 Ent │                                │                                │
│                 │ ries:[] LeaderCommit:0}        │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.292670 │ received RequestVoteReply {Ter │                                │                                │
│                 │ m:1 VoteGranted:true} from 1   │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.292818 │ While waiting for reply, state │                                │                                │
│                 │  = Leader                      │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.295473 │                                │                                │ AppendEntries: {Term:1 LeaderI │
│                 │                                │                                │ d:0 PrevLogIndex:0 PrevLogTerm │
│                 │                                │                                │ :0 Entries:[] LeaderCommit:0}  │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.295725 │                                │ in election timer term changed │                                │
│                 │                                │  from 0 to 1, bailing out      │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.295943 │                                │                                │ AppendEntries reply: {Term:1 S │
│                 │                                │                                │ uccess:true ConflictIndex:0 Co │
│                 │                                │                                │ nflictTerm:0}                  │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.295992 │                                │ AppendEntries: {Term:1 LeaderI │                                │
│                 │                                │ d:0 PrevLogIndex:0 PrevLogTerm │                                │
│                 │                                │ :0 Entries:[] LeaderCommit:0}  │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.296154 │                                │ AppendEntries reply: {Term:1 S │                                │
│                 │                                │ uccess:true ConflictIndex:0 Co │                                │
│                 │                                │ nflictTerm:0}                  │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.296388 │                                │                                │ in election timer term changed │
│                 │                                │                                │  from 0 to 1, bailing out      │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.296616 │ AppendEntries reply from 1 suc │                                │                                │
│                 │ cess: nextIndex := map[1:1 2:1 │                                │                                │
│                 │ ], matchIndex := map[1:0 2:0]; │                                │                                │
│                 │  commitIndex := 0              │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.296841 │ AppendEntries reply from 2 suc │                                │                                │
│                 │ cess: nextIndex := map[1:1 2:1 │                                │                                │
│                 │ ], matchIndex := map[1:0 2:0]; │                                │                                │
│                 │  commitIndex := 0              │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.296985 │ In election timer state=Leader │                                │                                │
│                 │ , bailing out                  │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.342763 │ sending AppendEntries to 2: ni │                                │                                │
│                 │ =1, args={Term:1 LeaderId:0 Pr │                                │                                │
│                 │ evLogIndex:0 PrevLogTerm:0 Ent │                                │                                │
│                 │ ries:[] LeaderCommit:0}        │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.343015 │ sending AppendEntries to 1: ni │                                │                                │
│                 │ =1, args={Term:1 LeaderId:0 Pr │                                │                                │
│                 │ evLogIndex:0 PrevLogTerm:0 Ent │                                │                                │
│                 │ ries:[] LeaderCommit:0}        │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.345219 │                                │ AppendEntries: {Term:1 LeaderI │                                │
│                 │                                │ d:0 PrevLogIndex:0 PrevLogTerm │                                │
│                 │                                │ :0 Entries:[] LeaderCommit:0}  │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.345444 │                                │ AppendEntries reply: {Term:1 S │                                │
│                 │                                │ uccess:true ConflictIndex:0 Co │                                │
│                 │                                │ nflictTerm:0}                  │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.346049 │ AppendEntries reply from 1 suc │                                │                                │
│                 │ cess: nextIndex := map[1:1 2:1 │                                │                                │
│                 │ ], matchIndex := map[1:0 2:0]; │                                │                                │
│                 │  commitIndex := 0              │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.347337 │                                │                                │ AppendEntries: {Term:1 LeaderI │
│                 │                                │                                │ d:0 PrevLogIndex:0 PrevLogTerm │
│                 │                                │                                │ :0 Entries:[] LeaderCommit:0}  │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.347516 │                                │                                │ AppendEntries reply: {Term:1 S │
│                 │                                │                                │ uccess:true ConflictIndex:0 Co │
│                 │                                │                                │ nflictTerm:0}                  │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.347686 │                                │                                │ Becomes Dead                   │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.347955 │                                │                                │ Accepting no more connections  │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348045 │                                │                                │ Waiting for existing connectio │
│                 │                                │                                │ ns to close                    │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348073 │                                │                                │ sendCommit completed           │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348089 │                                │                                │ All connections closed. Stoppi │
│                 │                                │                                │ ng server                      │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348164 │ Becomes Dead                   │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348224 │ Accepting no more connections  │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348267 │ Waiting for existing connectio │                                │                                │
│                 │ ns to close                    │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348319 │ All connections closed. Stoppi │                                │                                │
│                 │ ng server                      │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348332 │ sendCommit completed           │                                │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348343 │                                │ Becomes Dead                   │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348624 │                                │ Accepting no more connections  │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348646 │                                │ Waiting for existing connectio │                                │
│                 │                                │ ns to close                    │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348661 │                                │ All connections closed. Stoppi │                                │
│                 │                                │ ng server                      │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.348749 │                                │ sendCommit completed           │                                │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.350756 │                                │                                │ In election timer state=Dead,  │
│                 │                                │                                │ bailing out                    │
│                 │                                │                                │                                │
├─────────────────┼────────────────────────────────┼────────────────────────────────┼────────────────────────────────┤
│ 07:55:17.352309 │                                │ In election timer state=Dead,  │                                │
│                 │                                │ bailing out                    │                                │
│                 │                                │                                │                                │
└─────────────────┴────────────────────────────────┴────────────────────────────────┴────────────────────────────────┘

PASS
